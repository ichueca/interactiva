<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fase 1 - Operaciones Intermedias vs Terminales</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="main-container">
        
        <div class="content-card">
            <h1 class="teoria-titulo">‚öôÔ∏è Operaciones Intermedias vs Terminales</h1>
            
            <div class="teoria-seccion">
                <h3>Anatom√≠a de un Pipeline de Stream</h3>
                <p>
                    Un pipeline de Stream tiene tres partes:
                </p>
                <ul>
                    <li><strong>Fuente:</strong> De d√≥nde vienen los datos (List, Array, etc.)</li>
                    <li><strong>Operaciones Intermedias:</strong> Transforman el Stream (pueden ser 0 o m√°s)</li>
                    <li><strong>Operaci√≥n Terminal:</strong> Produce un resultado y cierra el Stream (solo 1)</li>
                </ul>
            </div>

            <div class="codigo-ejemplo">
                <pre>List<Integer> numeros = List.of(1, 2, 3, 4, 5, 6);

int resultado = numeros<span class="highlight">.stream()</span>              // FUENTE
    <span class="highlight">.filter(n -> n % 2 == 0)</span>    // INTERMEDIA
    <span class="highlight">.map(n -> n * n)</span>            // INTERMEDIA
    <span class="highlight">.sum()</span>;                     // TERMINAL

// Resultado: 56 (4 + 16 + 36)</pre>
            </div>

            <div class="teoria-seccion">
                <h3>üîπ Operaciones Intermedias</h3>
                <p>
                    Las operaciones intermedias <strong>transforman un Stream en otro Stream</strong>.
                    Son <strong>lazy</strong> (perezosas): no se ejecutan hasta que hay una operaci√≥n terminal.
                </p>
                
                <div class="comparacion">
                    <div class="comparacion-item">
                        <h4>Caracter√≠sticas</h4>
                        <p>‚úì Devuelven un Stream</p>
                        <p>‚úì Se pueden encadenar</p>
                        <p>‚úì No producen resultado final</p>
                        <p>‚úì Ejecuci√≥n lazy (perezosa)</p>
                    </div>
                    <div class="comparacion-item">
                        <h4>Ejemplos comunes</h4>
                        <p>‚Ä¢ filter() - Filtrar elementos</p>
                        <p>‚Ä¢ map() - Transformar elementos</p>
                        <p>‚Ä¢ sorted() - Ordenar</p>
                        <p>‚Ä¢ distinct() - Eliminar duplicados</p>
                        <p>‚Ä¢ limit() - Limitar cantidad</p>
                        <p>‚Ä¢ skip() - Saltar elementos</p>
                    </div>
                </div>
            </div>

            <div class="teoria-seccion">
                <h3>üî∏ Operaciones Terminales</h3>
                <p>
                    Las operaciones terminales <strong>producen un resultado o efecto secundario</strong>.
                    Inician la ejecuci√≥n del pipeline y <strong>consumen el Stream</strong>.
                </p>
                
                <div class="comparacion">
                    <div class="comparacion-item">
                        <h4>Caracter√≠sticas</h4>
                        <p>‚úì Producen un resultado final</p>
                        <p>‚úì Cierran el Stream</p>
                        <p>‚úì Solo puede haber UNA</p>
                        <p>‚úì Inician la ejecuci√≥n</p>
                    </div>
                    <div class="comparacion-item">
                        <h4>Ejemplos comunes</h4>
                        <p>‚Ä¢ collect() - Recolectar en colecci√≥n</p>
                        <p>‚Ä¢ forEach() - Ejecutar acci√≥n</p>
                        <p>‚Ä¢ count() - Contar elementos</p>
                        <p>‚Ä¢ sum() - Sumar (IntStream)</p>
                        <p>‚Ä¢ anyMatch() - Verificar condici√≥n</p>
                        <p>‚Ä¢ findFirst() - Encontrar primero</p>
                    </div>
                </div>
            </div>

            <div class="teoria-seccion">
                <h3>‚ö° Lazy Evaluation (Evaluaci√≥n Perezosa)</h3>
                <p>
                    Las operaciones intermedias NO se ejecutan inmediatamente. Solo se ejecutan cuando
                    se invoca una operaci√≥n terminal.
                </p>
                
                <div class="codigo-ejemplo">
                    <pre>Stream<String> stream = nombres.stream()
    .filter(n -> {
        System.out.println("Filtrando: " + n);
        return n.length() > 3;
    })
    .map(n -> {
        System.out.println("Mapeando: " + n);
        return n.toUpperCase();
    });

// ‚ö†Ô∏è Hasta aqu√≠ NO se imprime nada
// Las operaciones est√°n "esperando"

stream.collect(Collectors.toList());  // ‚úì AHORA se ejecuta todo</pre>
                </div>
            </div>

            <div class="teoria-seccion">
                <h3>‚ùå Error com√∫n: Reutilizar un Stream</h3>
                
                <div class="codigo-ejemplo">
                    <pre>Stream<Integer> numeros = Stream.of(1, 2, 3, 4, 5);

long pares = numeros.filter(n -> n % 2 == 0).count();
// Resultado: 2

long impares = numeros.filter(n -> n % 2 != 0).count();
// ‚ùå ERROR: IllegalStateException
// El Stream ya fue consumido</pre>
                </div>

                <div class="nota-explicativa" style="background-color: #fff3e0; border-left-color: #ff9800;">
                    <p><strong>‚ö†Ô∏è Importante:</strong></p>
                    <p>
                        Un Stream solo se puede usar UNA vez. Despu√©s de una operaci√≥n terminal,
                        el Stream queda cerrado y no se puede reutilizar.
                    </p>
                    <p>
                        <strong>Soluci√≥n:</strong> Crear un nuevo Stream cada vez que lo necesites.
                    </p>
                </div>
            </div>

            <div class="navegacion">
                <button class="btn-anterior" onclick="navegarSiguiente('teoria1-2.html')">‚Üê Anterior</button>
                <button class="btn-siguiente" onclick="navegarSiguiente('actividad1-1.html')">Siguiente: Actividades ‚Üí</button>
            </div>
        </div>
    </div>

    <script src="js/common.js"></script>
    <script>
        if (verificarEquipo()) {
            crearHeader();
            actualizarUltimaPagina('teoria1-3.html');
        }
    </script>
</body>
</html>
